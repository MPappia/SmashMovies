<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>TMDb Random Movie</title>
  <style>
    body { font-family: sans-serif; max-width: 600px; margin: 2rem auto; }
    form input, form button { padding: .5em; margin-right: .5em; }
    .movie { border: 1px solid #ccc; padding: 1em; margin-top: 1em; }
    .movie img { max-width: 100px; float: right; }
  </style>
</head>
<body>

  <h1>Surprise-me Movie</h1>
  <form id="filterForm">
    <input name="genre"    placeholder="Genre" />
    <input name="year"     placeholder="Year" type="number" />
    <input name="director" placeholder="Director" />
    <input name="actor"    placeholder="Actor" />
    <button type="submit">Go!</button>
  </form>

  <div id="result"></div>

  <script>
    const form   = document.getElementById('filterForm');
    const result = document.getElementById('result');
    const API    = 'https://your-backend.example.com/random-movie'; // adapte l’URL

    form.addEventListener('submit', async e => {
      e.preventDefault();
      result.innerHTML = 'Loading…';
      const params = new URLSearchParams(new FormData(form));
      const res    = await fetch(API + '?' + params);
      if (!res.ok) {
        result.innerHTML = 'Error fetching movie';
        return;
      }
      const m = await res.json();
      result.innerHTML = `
        <div class="movie">
          <h2>${m.title_fr} (${m.title_original||''})</h2>
          <img src="${m.poster_url||''}" alt="poster">
          <p><strong>Director:</strong> ${m.director}</p>
          <p><strong>Cast:</strong> ${m.actors.join(', ')}</p>
          <p><strong>Release:</strong> ${m.release_date}</p>
          <p><strong>Rating:</strong> ${m.vote_average} (${m.vote_count} votes)</p>
          <p><strong>Genres:</strong> ${m.genres.join(', ')}</p>
          <p><strong>Stream:</strong> ${m.providers.flatrate.join(', ')}</p>
          <p><strong>Rent:</strong> ${m.providers.rent.join(', ')}</p>
          <p><strong>Buy:</strong> ${m.providers.buy.join(', ')}</p>
        </div>`;
    });
  </script>

</body>
</html>
